webpackJsonp([43],{228:function(e,t,r){"use strict";function a(e){l||r(602)}Object.defineProperty(t,"__esModule",{value:!0});var i=r(484),s=r.n(i);for(var n in i)"default"!==n&&function(e){r.d(t,e,function(){return i[e]})}(n);var o=r(604),c=r.n(o),l=!1,u=r(0),p=a,h=u(s.a,c.a,!1,p,"data-v-8aceb048",null);h.options.__file="src/views/exchange/Order.vue",t.default=h.exports},484:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(58),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=r(23),n=r(11);t.default={data:function(){var e=this;return{btnType:0,filterSearch:{robotOrder:"",coinSymbol:"",orderDirection:"",type:"",orderId:"",memberId:"",baseSymbol:"",minPrice:"",maxPrice:"",status:"",pageNo:1,pageSize:10,completed:0},robotOrderArr:[{status:0,text:"查看机器人"},{status:1,text:"不看机器人"},{status:"",text:"全部"}],typeArr:[{status:0,text:"市价"},{status:1,text:"限价"},{status:"",text:"全部"}],orderDirArr:[{status:0,text:"买入"},{status:1,text:"卖出"},{status:"",text:"全部"}],priceRange:"",orderStatusModel:null,orderStatus:[{status:0,text:"交易中"},{status:1,text:"已完成"},{status:2,text:"已取消"},{status:3,text:"超时"},{status:"",text:"全部"}],totalNum:null,current:1,priceSecPass:!1,priceLow:null,priceHeight:null,coinSymbol:null,orderDirection:null,orderType:null,orderId:null,memberId:null,baseSymbol:null,currentPageIdx:1,ifLoading:!0,columns_first:[{title:"订单号",key:"orderId",width:180},{title:"用户ID",key:"memberId"},{title:"交易对",key:"symbol"},{title:"委托量",key:"amount"},{title:"成交量",key:"tradedAmount"},{title:"挂单类型",key:"type",render:function(e,t){return e("span",{},"MARKET_PRICE"==t.row.type?"市价":"限价")}},{title:"订单方向",key:"direction",render:function(e,t){return e("span",{},"BUY"==t.row.direction?"买入":"卖出")}},{title:"挂单价格",key:"price"},{title:"挂单时间",width:100,render:function(e,t){return e("span",{},(0,i.default)(t.row.time).format("YYYY-MM-DD HH:mm:ss"))}},{title:"状态",key:"status",render:function(e,t){var r=t.row,a="";return"TRADING"==r.status?a="交易中":"COMPLETED"==r.status?a="已完成":"CANCELED"==r.status&&(a="已取消"),e("span",{},a)}},{title:"操作",key:"age",width:150,render:function(t,r){var a=[];return a.push(t("Button",{props:{type:"info",size:"small"},style:{marginRight:"10px"},on:{click:function(){e.$router.push("/exchange/bborder/detail"),(0,n.removeStore)("exchangeOrderId"),(0,n.removeStore)("completed"),(0,n.setStore)("exchangeOrderId",r.row.orderId),(0,n.setStore)("completed",r.row.completed)}}},"明细")),"TRADING"==r.row.status&&a.push(t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.cancelOrder(r.row.orderId)}}},"撤销")),t("div",a)}}],userpage:[]}},methods:{localEnsure:function(){this.filterSearch.pageNo=1,this.current=1,this.btnType=0,this.filterSearch.completed=0,this.refreshPage(this.filterSearch)},hisEnsure:function(){this.filterSearch.pageNo=1,this.current=1,this.btnType=1,this.filterSearch.completed=1,this.refreshPage(this.filterSearch)},searchByFilter:function(){var e=/[^0-9]/;if(this.current=1,e.test(this.memberId)&&this.memberId)return void this.$Message.warning("请输入正确的id！");isNaN(1*this.priceLow)||isNaN(1*this.priceHeight)?this.$Message.warning("请输入正确的价格！"):1*this.priceLow<0||1*this.priceHeight<0?this.$Message.warning("价格应该大于等于零！"):1*this.priceLow>1*this.priceHeight?this.$Message.warning("最低价格不能高于最高价格"):(this.$store.commit("switchLoading",!0),this.refreshPage(this.filterSearch))},refreshPageManual:function(){for(var e in this.filterSearch)this.filterSearch[e]="";this.currentPageIdx=1,this.current=1,this.btnType=0,this.filterSearch.pageNo=1,this.filterSearch.pageSize=10,this.filterSearch.completed=0,this.refreshPage(this.filterSearch)},changePage:function(e){this.current=e,this.filterSearch.pageNo=e,this.refreshPage(this.filterSearch)},refreshPage:function(e){var t=this;this.ifLoading=!0,(0,s.queryBBOrder)(e).then(function(e){t.userpage=e.data.content,t.totalNum=e.data.totalElements,t.ifLoading=!1,t.$store.commit("switchLoading",!1)})},cancelOrder:function(e){var t=this;(0,s.cancelOrder)({orderId:e}).then(function(e){0==e.code?(t.$Message.success("撤销成功"),t.refreshPage(t.filterSearch)):t.$Message.error("撤销失败")}).catch(function(e){})}},created:function(){this.refreshPage(this.filterSearch)}}},602:function(e,t,r){var a=r(603);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(7)("98af9e34",a,!1,{})},603:function(e,t,r){t=e.exports=r(6)(!1),t.push([e.i,"\n.switchTab[data-v-8aceb048] {\n  margin: 20px 0;\n}\nInput[data-v-8aceb048],\n.ivu-select.ivu-select-single[data-v-8aceb048] {\n  width: 150px;\n}\n.priceSectionWrapper[data-v-8aceb048] {\n  margin-bottom: 10px;\n}\n.priceSectionWrapper .ivu-input-wrapper.ivu-input-type[data-v-8aceb048] {\n  width: 60px ;\n}\n.priceSectionWrapper .priceSection[data-v-8aceb048] {\n  float: left;\n}\n.priceSectionWrapper .orderStatus[data-v-8aceb048] {\n  margin-left: 20px;\n  float: left;\n}\n.priceSectionWrapper .btns[data-v-8aceb048] {\n  margin-left: 10px;\n  float: left;\n  height: 30px;\n  line-height: 30px;\n}\n.tips[data-v-8aceb048] {\n  color: red;\n}\n",""])},604:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Row",{staticClass:"switchTab"},[r("Col",{attrs:{span:"3"}},[r("Button",{attrs:{long:"",type:0===e.btnType?"primary":"ghost"},on:{click:e.localEnsure}},[e._v("当前委托")])],1),e._v(" "),r("Col",{attrs:{span:"3",offset:"1"}},[r("Button",{attrs:{long:"",type:1===e.btnType?"primary":"ghost"},on:{click:e.hisEnsure}},[e._v("历史委托")])],1)],1),e._v(" "),r("Card",[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n        委托订单\n          "),r("Button",{attrs:{type:"primary",size:"small"},on:{click:e.refreshPageManual}},[r("Icon",{attrs:{type:"refresh"}}),e._v("刷新\n          ")],1)],1),e._v(" "),r("Row",{staticClass:"functionWrapper"},[r("div",{staticClass:"searchWrapper clearfix"},[r("Poptip",{attrs:{trigger:"hover",content:"请输入 币单位 搜索",placement:"bottom-start"}},[r("Input",{attrs:{placeholder:"请输入 币单位 搜索"},model:{value:e.filterSearch.coinSymbol,callback:function(t){e.$set(e.filterSearch,"coinSymbol",t)},expression:"filterSearch.coinSymbol"}})],1),e._v(" "),r("Poptip",{attrs:{trigger:"hover",content:"请输入 订单号 搜索",placement:"bottom-start"}},[r("Input",{attrs:{placeholder:"请输入 订单号 搜索"},model:{value:e.filterSearch.orderId,callback:function(t){e.$set(e.filterSearch,"orderId",t)},expression:"filterSearch.orderId"}})],1),e._v(" "),r("Poptip",{attrs:{trigger:"hover",content:"请输入 用户ID 搜索",placement:"bottom-start"}},[r("Input",{attrs:{placeholder:"请输入 用户ID 搜索"},model:{value:e.filterSearch.memberId,callback:function(t){e.$set(e.filterSearch,"memberId",t)},expression:"filterSearch.memberId"}})],1),e._v(" "),r("Poptip",{attrs:{trigger:"hover",content:"请输入 结算单位 搜索",placement:"bottom-start"}},[r("Input",{attrs:{placeholder:"请输入 结算单位 搜索"},model:{value:e.filterSearch.baseSymbol,callback:function(t){e.$set(e.filterSearch,"baseSymbol",t)},expression:"filterSearch.baseSymbol"}})],1)],1)]),e._v(" "),r("Row",{staticClass:"priceSectionWrapper clearfix"},[r("div",{staticClass:"priceSection"},[e._v("价格区间："),r("Input",{model:{value:e.filterSearch.minPrice,callback:function(t){e.$set(e.filterSearch,"minPrice",t)},expression:"filterSearch.minPrice"}}),e._v(" ~ \n          "),r("Input",{model:{value:e.filterSearch.maxPrice,callback:function(t){e.$set(e.filterSearch,"maxPrice",t)},expression:"filterSearch.maxPrice"}})],1),e._v(" "),r("div",{staticClass:"orderStatus"},[r("span",[e._v("订单状态：")]),e._v(" "),r("Select",{model:{value:e.filterSearch.status,callback:function(t){e.$set(e.filterSearch,"status",t)},expression:"filterSearch.status"}},e._l(e.orderStatus,function(t){return r("Option",{key:t.status,attrs:{value:t.status}},[e._v(e._s(t.text))])}))],1),e._v(" "),r("div",{staticClass:"orderStatus"},[r("span",[e._v("订单方向：")]),e._v(" "),r("Select",{model:{value:e.filterSearch.orderDirection,callback:function(t){e.$set(e.filterSearch,"orderDirection",t)},expression:"filterSearch.orderDirection"}},e._l(e.orderDirArr,function(t){return r("Option",{key:t.status,attrs:{value:t.status}},[e._v(e._s(t.text))])}))],1),e._v(" "),r("div",{staticClass:"orderStatus"},[r("span",[e._v("挂单类型：")]),e._v(" "),r("Select",{staticStyle:{width:"100px"},model:{value:e.filterSearch.type,callback:function(t){e.$set(e.filterSearch,"type",t)},expression:"filterSearch.type"}},e._l(e.typeArr,function(t){return r("Option",{key:t.status,attrs:{value:t.status}},[e._v(e._s(t.text))])}))],1),e._v(" "),r("div",{staticClass:"orderStatus"},[r("span",[e._v("机器人：")]),e._v(" "),r("Select",{model:{value:e.filterSearch.robotOrder,callback:function(t){e.$set(e.filterSearch,"robotOrder",t)},expression:"filterSearch.robotOrder"}},e._l(e.robotOrderArr,function(t){return r("Option",{key:t.status,attrs:{value:t.status}},[e._v(e._s(t.text))])}))],1),e._v(" "),r("div",{staticClass:"btns"},[r("Button",{attrs:{type:"info",size:"small"},on:{click:e.searchByFilter}},[e._v("搜索")])],1)]),e._v(" "),r("Row",[r("Table",{attrs:{columns:e.columns_first,data:e.userpage,loading:e.ifLoading}})],1),e._v(" "),r("Row",{staticClass:"pageWrapper"},[r("Page",{staticStyle:{"margin-top":"8px"},attrs:{total:e.totalNum,current:e.current,"show-elevator":""},on:{"on-change":e.changePage}})],1)],1)],1)},i=[];a._withStripped=!0;var s={render:a,staticRenderFns:i};t.default=s}});