webpackJsonp([30],{396:function(t,e,a){"use strict";function r(t){l||a(688)}Object.defineProperty(e,"__esModule",{value:!0});var s=a(557),i=a.n(s);for(var n in s)"default"!==n&&function(t){a.d(e,t,function(){return s[t]})}(n);var o=a(690),c=a.n(o),l=!1,u=a(0),p=r,d=u(i.a,c.a,!1,p,"data-v-6503801a",null);d.options.__file="src/views/otc/AdManage.vue",e.default=d.exports},557:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(53);e.default={data:function(){var t=this;return{selection:[],cbData:{},currentPageIdx:1,filterSearch:{account:"",advertiseType:"",status:"",payModel:""},advertiseTypeArr:[{status:0,text:"买入"},{status:1,text:"卖出"},{status:"",text:"全部"}],advertiseStatusArr:[{status:0,text:"上架"},{status:1,text:"下架"},{status:"",text:"全部"}],ifloading:!1,columnsList:[{type:"selection",width:60},{title:"广告编号",width:108,key:"id"},{title:"创建时间",key:"createTime"},{title:"创建人",render:function(t,e){var a=e.row.member;return t("div",[t("p",{},a.username),t("p",{},"("+a.realName+")")])}},{title:"币种",render:function(t,e){return t("span",e.row.coin.unit)}},{title:"广告数量",key:"number"},{title:"广告金额",key:"price"},{title:"广告限额",align:"center",render:function(t,e){return t("span",e.row.minLimit+"-"+e.row.maxLimit)}},{title:"类型",key:"advertiseType",render:function(t,e){return t("span",{},0===e.row.advertiseType?"买入":"卖出")}},{title:"支付方式",key:"payMode"},{title:"广告状态",key:"status",render:function(t,e){return t("span",{},e.row.status?"下架":"上架")}},{title:"操作",align:"center",width:150,key:"handle",render:function(e,a){return e("div",[e("Button",{props:{size:"small",type:"primary",disabled:!!a.row.status},style:{marginRight:"5px"},on:{click:function(){t.operation({ids:[a.row.id],status:1})}}},"下架"),e("Button",{props:{type:"info",size:"small"},on:{click:function(){t.$router.push({name:"otc:adManage:advertisedetail",query:{advID:a.row.id}})}}},"详情")])}}]}},methods:{selectionChange:function(t){this.selection=t},batchDel:function(){var t=[];this.selection.forEach(function(e){t.push(e.id)}),this.operation({ids:t,status:2})},operation:function(t){var e=this;(0,r.upDownAdv)(t).then(function(t){t.code?e.$Message.error(t.message):(e.$Message.success(t.message),e.refreshPage({pageNo:e.currentPageIdx,pageSize:10}))}).catch(function(t){})},searchByFilter:function(){this.currentPageIdx=1;var t=Object.assign(this.filterSearch,{pageNo:1,pageSize:10});this.refreshPage(t)},refreshPageManual:function(){for(var t in this.filterSearch)this.filterSearch[t]="";this.refreshPage()},changePage:function(t){this.currentPageIdx=t;var e=Object.assign(this.filterSearch,{pageNo:t,pageSize:10});this.refreshPage(e)},refreshPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.ifloading=!0,(0,r.queryOtcAdv)(e).then(function(e){e.code?t.$Message.error(e.message):t.cbData=e.data,t.ifloading=!1}).catch(function(t){})}},created:function(){this.refreshPage()}}},688:function(t,e,a){var r=a(689);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(13)("3cb610bc",r,!1,{})},689:function(t,e,a){e=t.exports=a(12)(!1),e.push([t.i,"",""])},690:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n\t\t\t\t后台广告\n\t\t\t\t"),a("Button",{attrs:{type:"primary",size:"small"},on:{click:t.refreshPageManual}},[a("Icon",{attrs:{type:"refresh"}}),t._v(" 刷新\n\t\t\t\t")],1)],1),t._v(" "),a("Row",{staticClass:"functionWrapper"},[a("div",{staticClass:"btnsWrapper"},[a("Button",{attrs:{type:"error"},on:{click:t.batchDel}},[t._v("批量删除")])],1),t._v(" "),a("div",{staticClass:"searchWrapper clearfix"},[a("div",{staticClass:"poptip"},[a("Poptip",{attrs:{trigger:"hover",content:"请输入手机号、真实姓名或会员名称搜索",placement:"bottom-start"}},[a("Input",{attrs:{placeholder:"请输入手机号、真实姓名或会员名称搜索"},model:{value:t.filterSearch.account,callback:function(e){t.$set(t.filterSearch,"account",e)},expression:"filterSearch.account"}})],1)],1),t._v(" "),a("div",{staticClass:"poptip"},[a("Poptip",{attrs:{trigger:"hover",content:"请输入支付方式搜索",placement:"bottom-start"}},[a("Input",{attrs:{placeholder:"请输入支付方式搜索"},model:{value:t.filterSearch.payModel,callback:function(e){t.$set(t.filterSearch,"payModel",e)},expression:"filterSearch.payModel"}})],1)],1),t._v(" "),a("div",{staticClass:"poptip"},[a("span",[t._v("类型：")]),t._v(" "),a("Select",{model:{value:t.filterSearch.advertiseType,callback:function(e){t.$set(t.filterSearch,"advertiseType",e)},expression:"filterSearch.advertiseType"}},t._l(t.advertiseTypeArr,function(e){return a("Option",{key:e.status,attrs:{value:e.status}},[t._v(t._s(e.text))])}))],1),t._v(" "),a("div",{staticClass:"poptip"},[a("span",[t._v("状态：")]),t._v(" "),a("Select",{model:{value:t.filterSearch.status,callback:function(e){t.$set(t.filterSearch,"status",e)},expression:"filterSearch.status"}},t._l(t.advertiseStatusArr,function(e){return a("Option",{key:e.status,attrs:{value:e.status}},[t._v(t._s(e.text))])}))],1),t._v(" "),a("div",{staticClass:"btns"},[a("Button",{attrs:{type:"info",size:"small"},on:{click:t.searchByFilter}},[t._v("搜索")])],1)])]),t._v(" "),a("Row",[a("Table",{attrs:{loading:t.ifloading,columns:t.columnsList,data:t.cbData.content,border:""},on:{"on-selection-change":t.selectionChange}})],1),t._v(" "),a("Row",{staticClass:"pageWrapper"},[a("Page",{attrs:{total:t.cbData.totalElements,current:t.currentPageIdx,"show-elevator":""},on:{"on-change":t.changePage}})],1)],1)],1)},s=[];r._withStripped=!0;var i={render:r,staticRenderFns:s};e.default=i}});