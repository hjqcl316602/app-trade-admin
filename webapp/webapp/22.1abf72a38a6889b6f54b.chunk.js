webpackJsonp([22],{238:function(e,t,r){"use strict";function a(e){c||r(628)}Object.defineProperty(t,"__esModule",{value:!0});var n=r(493),s=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,function(){return n[e]})}(i);var o=r(630),l=r.n(o),c=!1,u=r(0),d=a,p=u(s.a,l.a,!1,d,null,null);p.options.__file="src/views/otc/OrderManage.vue",t.default=p.exports},493:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(25),n=function(e){return e&&e.__esModule?e:{default:e}}(a),s=(r(11),r(23));t.default={name:"OrderManage",data:function(){var e=this;return{aLink:s.BASICURL+"admin/otc/order/out-excel",coinSearchArr:[],sortSearch:{direction:[],property:[]},orderStatusArr:[{status:0,text:"已取消"},{status:1,text:"未付款"},{status:2,text:"已付款"},{status:3,text:"已完成"},{status:4,text:"申诉中"},{status:"",text:"全部"}],advertiseArr:[{status:0,text:"买入"},{status:1,text:"卖出"},{status:"",text:"全部"}],filterSearch:{channelOrderId:"",status:"",unit:"",memberName:"",customerName:"",orderSn:"",minMoney:"",maxMoney:"",minNumber:"",maxNumber:"",advertiseType:"",subMemId:""},modelInner:{},cbData:{},ifloading:!1,currentPageIdx:1,orderStatus:null,showModal:!1,saveLoading:!1,columnsList:[{title:"订单编号",width:160,key:"orderSn"},{title:"渠道订单号（渠道用户编号）",key:"channelOrderId",width:200,render:function(e,t){var r=t.row,a=r.subMemId;return e("p",[e("p",r.channelOrderId),e("p",a?"("+a+")":"")])}},{title:"交易时间",width:200,key:"createTime",sortable:"custom"},{title:"交易人",key:"customerName"},{title:"创建人",key:"memberName"},{title:"币种",key:"unit"},{title:"类型",key:"advertiseType",render:function(e,t){return e("span",{},0===t.row.advertiseType?"买入":"卖出")}},{title:"订单数量",key:"number"},{title:"订单金额",key:"money"},{title:"手续费",key:"fee"},{title:"支付方式",key:"payMode"},{title:"订单状态",key:"status",render:function(e,t){return e("span",{},["已取消","未付款","已付款","已完成","申诉中"][t.row.status])}},{title:"操作",align:"center",key:"handle",render:function(t,r){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"10px"},on:{click:function(){e.showInfoModal(r)}}},"查看")])}}]}},methods:{definedOrder:function(e){var t="desc"===e.order?1:0,r=this.sortSearch.property.indexOf(e.key);-1!==r?this.sortSearch.direction[r]=t:(this.sortSearch.property.push(e.key),this.sortSearch.direction.push(t));var a={pageNo:1,pageSize:10};Object.assign(a,this.filterSearch,this.sortSearch),this.refreshPage(a)},dateRange:function(e){this.filterSearch.startTime=e[0],this.filterSearch.endTime=e[1]},searchByFilter:function(){var e=Object.assign({pageNo:1,pageSize:10},this.filterSearch);this.aLink=s.BASICURL+"admin/otc/order/out-excel?"+n.default.stringify(e),this.refreshPage(e)},selectionChange:function(e){},refreshPageManual:function(){this.currentPageIdx=1;for(var e in this.filterSearch)this.filterSearch[e]="";this.refreshPage()},changePage:function(e){this.currentPageIdx=e;var t=Object.assign({pageNo:e,pageSize:10},this.filterSearch,this.sortSearch);this.refreshPage(t)},showInfoModal:function(e){this.showModal=!0,this.modelInner=e.row},queryStatus:function(e){void 0===e.query.status?this.orderStatus=null:this.orderStatus=e.query.status,this.getData()},refreshPage:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.ifloading=!0,(0,s.queryOtcOrder)(t).then(function(t){t.code?e.$Message.error(t.message):e.cbData=t.data,e.ifloading=!1}).catch(function(e){})}},created:function(){var e=this;(0,s.getCoinName)().then(function(t){t.code?e.$Message.error(t.message):(e.coinSearchArr=t.data,e.coinSearchArr.push({name:"全部",unit:"全部"}))}).catch(function(e){}),this.refreshPage()},filters:{filterOrderStatus:function(e){return["已取消","未付款","已付款","已完成","申诉中"][e]}},watch:{$route:function(e,t){this.queryStatus(e)}}}},628:function(e,t,r){var a=r(629);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(7)("18e2090f",a,!1,{})},629:function(e,t,r){t=e.exports=r(6)(!1),t.push([e.i,"\n.modelInfo h3 {\n  color: #2d8cf0;\n}\n.modelInfo ul li {\n  margin: 5px 0;\n  font-size: 14px;\n}\n.modelInfo ul li > span {\n  display: inline-block;\n  margin-left: 25px;\n  width: 100px;\n  font-weight: 700;\n}\n",""])},630:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Card",[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n\t\t\t\t订单管理\n\t\t\t\t"),r("Button",{attrs:{type:"primary",size:"small"},on:{click:e.refreshPageManual}},[r("Icon",{attrs:{type:"refresh"}}),e._v(" 刷新\n\t\t\t\t")],1)],1),e._v(" "),r("Row",{staticClass:"functionWrapper"},[r("div",{staticClass:"searchWrapper clearfix"},[r("div",{staticClass:"poptip"},[r("Poptip",{attrs:{trigger:"hover",content:"请输入渠道用户编号搜索",placement:"bottom-start"}},[r("Input",{attrs:{placeholder:"请输入渠道用户编号搜索"},model:{value:e.filterSearch.subMemId,callback:function(t){e.$set(e.filterSearch,"subMemId",t)},expression:"filterSearch.subMemId"}})],1)],1),e._v(" "),r("div",{staticClass:"poptip"},[r("Poptip",{attrs:{trigger:"hover",content:"请输入渠道订单号搜索",placement:"bottom-start"}},[r("Input",{attrs:{placeholder:"请输入渠道订单号搜索"},model:{value:e.filterSearch.channelOrderId,callback:function(t){e.$set(e.filterSearch,"channelOrderId",t)},expression:"filterSearch.channelOrderId"}})],1)],1),e._v(" "),r("div",{staticClass:"poptip"},[r("Poptip",{attrs:{trigger:"hover",content:"请输入订单号搜索",placement:"bottom-start"}},[r("Input",{attrs:{placeholder:"请输入订单号搜索"},model:{value:e.filterSearch.orderSn,callback:function(t){e.$set(e.filterSearch,"orderSn",t)},expression:"filterSearch.orderSn"}})],1)],1),e._v(" "),r("div",{staticClass:"poptip"},[r("Poptip",{attrs:{trigger:"hover",content:"请输入交易人搜索",placement:"bottom-start"}},[r("Input",{attrs:{placeholder:"请输入交易人搜索"},model:{value:e.filterSearch.customerName,callback:function(t){e.$set(e.filterSearch,"customerName",t)},expression:"filterSearch.customerName"}})],1)],1),e._v(" "),r("div",{staticClass:"poptip"},[r("Poptip",{attrs:{trigger:"hover",content:"请输入创建人搜索",placement:"bottom-start"}},[r("Input",{attrs:{placeholder:"请输入创建人搜索"},model:{value:e.filterSearch.memberName,callback:function(t){e.$set(e.filterSearch,"memberName",t)},expression:"filterSearch.memberName"}})],1)],1),e._v(" "),r("div",{staticClass:"poptip"},[r("span",[e._v("币种：")]),e._v(" "),r("Select",{model:{value:e.filterSearch.unit,callback:function(t){e.$set(e.filterSearch,"unit",t)},expression:"filterSearch.unit"}},e._l(e.coinSearchArr,function(t,a){return r("Option",{key:t.unit,attrs:{value:"全部"==t.unit?"":t.unit}},[e._v(e._s(t.unit))])}))],1),e._v(" "),r("div",{staticClass:"poptip"},[r("span",[e._v("类型：")]),e._v(" "),r("Select",{model:{value:e.filterSearch.advertiseType,callback:function(t){e.$set(e.filterSearch,"advertiseType",t)},expression:"filterSearch.advertiseType"}},e._l(e.advertiseArr,function(t){return r("Option",{key:t.status,attrs:{value:t.status}},[e._v(e._s(t.text))])}))],1),e._v(" "),r("br"),e._v(" "),r("div",{staticClass:"poptip range"},[r("Poptip",{attrs:{trigger:"hover",content:"最低订单数搜索",placement:"bottom-start"}},[r("Input",{attrs:{placeholder:"最低订单数搜索"},model:{value:e.filterSearch.minNumber,callback:function(t){e.$set(e.filterSearch,"minNumber",t)},expression:"filterSearch.minNumber"}})],1),e._v("\n\t\t\t\t\t\t~\n\t\t\t\t\t\t"),r("Poptip",{attrs:{trigger:"hover",content:"最高订单数搜索",placement:"bottom-start"}},[r("Input",{attrs:{placeholder:"最高订单数搜索"},model:{value:e.filterSearch.maxNumber,callback:function(t){e.$set(e.filterSearch,"maxNumber",t)},expression:"filterSearch.maxNumber"}})],1)],1),e._v(" "),r("div",{staticClass:"poptip range"},[r("Poptip",{attrs:{trigger:"hover",content:"最低订单金额搜索",placement:"bottom-start"}},[r("Input",{attrs:{placeholder:"最低订单金额搜索"},model:{value:e.filterSearch.minMoney,callback:function(t){e.$set(e.filterSearch,"minMoney",t)},expression:"filterSearch.minMoney"}})],1),e._v("\n\t\t\t\t\t\t~\n\t\t\t\t\t\t"),r("Poptip",{attrs:{trigger:"hover",content:"最高订单金额搜索",placement:"bottom-start"}},[r("Input",{attrs:{placeholder:"最高订单金额搜索"},model:{value:e.filterSearch.maxMoney,callback:function(t){e.$set(e.filterSearch,"maxMoney",t)},expression:"filterSearch.maxMoney"}})],1)],1),e._v(" "),r("div",{staticClass:"poptip"},[r("span",[e._v("订单状态：")]),e._v(" "),r("Select",{model:{value:e.filterSearch.status,callback:function(t){e.$set(e.filterSearch,"status",t)},expression:"filterSearch.status"}},e._l(e.orderStatusArr,function(t){return r("Option",{key:t.status,attrs:{value:t.status}},[e._v(e._s(t.text))])}))],1),e._v(" "),r("div",{staticClass:"poptip"},[r("DatePicker",{attrs:{type:"daterange",placement:"bottom-end",placeholder:"选择时间区间"},on:{"on-change":e.dateRange}})],1),e._v(" "),r("div",{staticClass:"btns"},[r("Button",{attrs:{type:"info",size:"small"},on:{click:e.searchByFilter}},[e._v("搜索")])],1)])]),e._v(" "),r("Row",[r("Table",{attrs:{loading:e.ifloading,columns:e.columnsList,data:e.cbData.content,border:""},on:{"on-selection-change":e.selectionChange,"on-sort-change":e.definedOrder}})],1),e._v(" "),r("Row",{staticClass:"pageWrapper"},[r("Page",{attrs:{total:e.cbData.totalElements,current:e.currentPageIdx,"show-elevator":""},on:{"on-change":e.changePage}})],1),e._v(" "),r("Modal",{staticClass:"modelInfo",attrs:{width:500},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[r("h3",{attrs:{slot:"header"},slot:"header"},[e._v("订单信息")]),e._v(" "),r("ul",[r("li",[r("span",[e._v("订单编号：")]),e._v(e._s(e.modelInner.orderSn))]),e._v(" "),r("li",[r("span",[e._v("渠道订单号：")]),e._v(e._s(e.modelInner.channelOrderId))]),e._v(" "),r("li",[r("span",[e._v("渠道用户编号：")]),e._v(e._s(e.modelInner.subMemId))]),e._v(" "),r("li",[r("span",[e._v("交易时间：")]),e._v(e._s(e.modelInner.createTime))]),e._v(" "),r("li",[r("span",[e._v("交易人：")]),e._v(e._s(e.modelInner.customerName))]),e._v(" "),r("li",[r("span",[e._v("创建人：")]),e._v(e._s(e.modelInner.memberName))]),e._v(" "),r("li",[r("span",[e._v("币种：")]),e._v(e._s(e.modelInner.unit))]),e._v(" "),r("li",[r("span",[e._v("类型：")]),e._v(e._s(e.modelInner.advertiseType?"出售":"购买"))]),e._v(" "),r("li",[r("span",[e._v("订单数量：")]),e._v(e._s(e.modelInner.number))]),e._v(" "),r("li",[r("span",[e._v("订单金额：")]),e._v(e._s(e.modelInner.money))]),e._v(" "),r("li",[r("span",[e._v("手续费：")]),e._v(e._s(""+e.modelInner.fee))]),e._v(" "),r("li",[r("span",[e._v("支付方式：")]),e._v(e._s(e.modelInner.payMode))]),e._v(" "),r("li",[r("span",[e._v("订单状态：")]),e._v(e._s(e._f("filterOrderStatus")(e.modelInner.status)))]),e._v(" "),r("li",[r("span",[e._v("付款时间：")]),e._v(e._s(e.modelInner.payTime))]),e._v(" "),r("li",[r("span",[e._v("订单取消时间：")]),e._v(e._s(e.modelInner.cancelTime?e.modelInner.cancelTime:"--"))]),e._v(" "),r("li",[r("span",[e._v("放行时间：")]),e._v(e._s(e.modelInner.releaseTime?e.modelInner.releaseTime:"--"))])]),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"})])],1)],1)},n=[];a._withStripped=!0;var s={render:a,staticRenderFns:n};t.default=s}});