webpackJsonp([47],{309:function(e,n,t){"use strict";function a(e){c||t(667)}Object.defineProperty(n,"__esModule",{value:!0});var r=t(565),s=t.n(r);for(var i in r)"default"!==i&&function(e){t.d(n,e,function(){return r[e]})}(i);var o=t(669),l=t.n(o),c=!1,u=t(0),d=a,g=u(s.a,l.a,!1,d,"data-v-83293784",null);g.options.__file="src/views/content/AnnounceManage.vue",n.default=g.exports},565:function(e,n,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=t(27),s=a(r),i=t(25),o=t(69),l=a(o),c=t(11);n.default={data:function(){var e=this;return{currentPageIdx:1,ifDelete:!1,ifLoading:!0,id:null,ifUpdateBtn:!1,selectedArr:[],announcementArr:[],current:1,totalNum:null,manageModal:!1,manageTitle:null,manageClass:null,manageClassArr:[{status:0,klassName:"常见分类"}],imgUrl:null,createTime:null,ifSHow:null,ifShowArr:[{status:0,klassName:"显示"},{status:1,klassName:"不显示"}],columns_first:[{type:"selection",width:60},{title:"编号",key:"id",width:80},{title:"标题",key:"title"},{title:"发布时间",key:"createTime"},{title:"是否显示",render:function(e,n){var t=null;return t=n.row.isShow?"是":"否",e("span",{},t)}},{title:"是否置顶",render:function(e,n){var t=null;return t=0==n.row.isTop?"是":"否",e("span",{},t)}},{title:"操作",width:250,render:function(n,t){return n("div",[n("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){(0,c.removeStore)("manageID"),(0,c.setStore)("manageID",t.row.id),e.$router.push("/content/announceManage/addAnnounce")}}},"查看 / 编辑"),n("Button",{props:{type:"error",size:"small"},on:{click:function(){(0,i.stickTopAnnounce)({id:t.row.id}).then(function(n){n.code?e.$Message.error(n.message):(e.$Message.success(n.message),e.refreshPage())}).catch(function(e){})}}},"置顶"),n("Button",{props:{type:"error",size:"small"},style:{marginLeft:"6px"},on:{click:function(){(0,i.manageDown)({id:t.row.id}).then(function(n){n.code?e.$Message.error(n.message):(e.$Message.success(n.message),e.refreshPage())}).catch(function(e){})}}},"取消置顶")])}}]}},methods:{refreshPageManual:function(){this.ifLoading=!0,this.refreshPage({pageNo:this.currentPageIdx,pageSize:10})},confirmDel:function(){var e=this,n=[];this.selectedArr.forEach(function(e){n.push(e.id)});s.default.stringify({ids:n},{arrayFormat:"repeat"});(0,i.delAnnounce)({ids:n}).then(function(n){n.code?e.$Message.error("删除失败!"):(e.refreshPage({pageNo:1,pageSize:10}),e.$Message.success("删除成功!"))})},cancelDel:function(){this.$Message.success("已取消！")},delOneAnnounce:function(){this.selectedArr.length?this.ifDelete=!0:this.$Message.warning("请选择需要删除的内容！")},updateManage:function(){var e=this,n={id:this.id,title:this.manageTitle,sysHelpClassification:this.manageClass,imgUrl:this.imgUrl,status:this.ifSHow,createTime:(0,l.default)(this.createTime).format("YYYY-MM-DD HH:mm:ss")};(0,i.updateHelpManage)(n).then(function(n){n.code?e.$Message.error("出现异常!"):(e.manageModal=!1,e.$Message.success("更新成功!"),e.refreshPage())})},cancelAdd:function(){this.manageModal=!1},showModel:function(){this.manageModal=!0},addOneAnnounce:function(){this.$router.push("/content/announceManage/addAnnounce")},select:function(e){this.selectedArr=e},changePage:function(e){this.currentPageIdx=e,this.refreshPage({pageNo:e,pageSize:10})},refreshPage:function(e){var n=this;(0,c.removeStore)("manageID"),(0,i.announceManage)(e).then(function(e){n.ifLoading=!1,n.announcementArr=e.data.content,n.totalNum=e.data.totalElements})}},created:function(){this.refreshPage()}}},667:function(e,n,t){var a=t(668);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t(7)("748101d9",a,!1,{})},668:function(e,n,t){n=e.exports=t(6)(!1),n.push([e.i,"\n.manageRow[data-v-83293784] {\n  height: 45px;\n}\n.pageWrapper[data-v-83293784] {\n  text-align: right;\n  margin: 25px;\n}\n.manageWrapper[data-v-83293784] {\n  text-align: right;\n}\n.manageWrapper Button[data-v-83293784] {\n  margin-right: 10px;\n}\n.manageModal p[data-v-83293784],\n.manageModal div[data-v-83293784] {\n  margin-bottom: 10px;\n}\n.manageModal p span[data-v-83293784],\n.manageModal div span[data-v-83293784] {\n  display: inline-block;\n  font-size: 15px;\n  text-align: right;\n}\n.manageModal p span i[data-v-83293784],\n.manageModal div span i[data-v-83293784] {\n  color: red;\n  font-weight: 700;\n  font-style: normal;\n}\n.manageModal .ivu-input-wrapper.ivu-input-type[data-v-83293784] {\n  width: 70%;\n}\n",""])},669:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("Card",[t("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n      公告管理\n      "),t("Button",{attrs:{type:"primary",size:"small"},on:{click:e.refreshPageManual}},[t("Icon",{attrs:{type:"refresh"}}),e._v("\n        刷新\n      ")],1)],1),e._v(" "),t("Row",{staticClass:"manageRow clearfix"},[t("div",{staticClass:"manageWrapper"},[t("Button",{attrs:{type:"error"},on:{click:e.delOneAnnounce}},[e._v("删除")]),e._v(" "),t("Button",{attrs:{type:"info"},on:{click:e.addOneAnnounce}},[e._v("添加")])],1)]),e._v(" "),t("Row",[t("Table",{attrs:{border:"",columns:e.columns_first,data:e.announcementArr,loading:e.ifLoading},on:{"on-selection-change":e.select}})],1),e._v(" "),t("Row",{staticClass:"pageWrapper"},[t("Page",{staticClass:"buttomPage",attrs:{total:e.totalNum,current:e.current,"show-elevator":""},on:{"on-change":e.changePage}})],1),e._v(" "),t("Modal",{attrs:{title:"删除"},on:{"on-ok":e.confirmDel,"on-cancel":e.cancelDel},model:{value:e.ifDelete,callback:function(n){e.ifDelete=n},expression:"ifDelete"}},[t("p",[e._v("是否删除已选择的"+e._s(e.selectedArr.length)+"项")])])],1)],1)},r=[];a._withStripped=!0;var s={render:a,staticRenderFns:r};n.default=s}});