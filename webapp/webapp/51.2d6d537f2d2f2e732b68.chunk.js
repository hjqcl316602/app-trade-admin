webpackJsonp([51],{323:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(578),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);var r=n(709),s=n.n(r),l=n(0),c=l(a.a,s.a,!1,null,null,null);c.options.__file="src/views/otc/CoinManage.vue",e.default=c.exports},578:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(25);e.default={name:"CoinManage",data:function(){var t=this;return{selectArr:[],createOrUpdate:!0,cbData:{},ifloading:!1,currentPageIdx:1,showEditModal:!1,switchStatus:!0,coinInformation:{id:null,nameCn:"",name:"",unit:"",jyRate:"",sellMinAmount:"",buyMinAmount:"",status:0},ruleValidate:{nameCn:[{required:!0,message:"币种名称不能为空",trigger:"blur"}],name:[{required:!0,message:"英文名称不能为空",trigger:"blur"}],unit:[{required:!0,message:"货币单位不能为空",trigger:"blur"}],jyRate:[{required:!0,message:"交易手续费率不能为空",trigger:"blur"}],sellMinAmount:[{required:!0,message:"卖出广告最低发布数量不能为空",trigger:"blur"}],buyMinAmount:[{required:!0,message:"买入广告最低发布数量不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"blur"}]},columnsList:[{type:"selection",width:60},{title:"币种编号",key:"id"},{title:"币种名称",key:"nameCn"},{title:"英文名称",key:"name"},{title:"货币单位",key:"unit"},{title:"交易手续费率",key:"jyRate",render:function(t,e){return t("span",{},e.row.jyRate+"%")}},{title:"卖出广告最低发布数量",width:180,key:"sellMinAmount"},{title:"买入广告最低发布数量",width:180,key:"buyMinAmount"},{title:"状态",key:"status",render:function(t,e){return t("span",{},e.row.status?"失效":"正常")}},{title:"操作",align:"center",key:"handle",render:function(e,n){return e("div",[e("Button",{props:{type:"primary",size:"small"},on:{click:function(){t.showEditModal=!0,t.createOrUpdate=!1;for(var e in t.coinInformation)t.coinInformation[e]=n.row[e];n.row.status?t.switchStatus=!1:t.switchStatus=!0}}},"修改")])}}]}},methods:{selectionChange:function(t){this.selectArr=t},refreshPageManual:function(){this.refreshPage()},delCoin:function(){var t=this,e=[];this.selectArr.forEach(function(t){e.push(t.id)}),e.length?this.$Modal.confirm({title:"删除币种",content:"<p>是否删除选中的"+this.selectArr.length+"项</p>",onOk:function(){(0,o.delOtcCoin)({ids:e}).then(function(e){e.code?t.$Message.error(e.message):t.$Message.success(e.message),t.refreshPage()}).catch(function(t){})},onCancel:function(){t.$Message.info("已取消！")}}):this.$Message.warning("请选择需要删除的项！")},changePage:function(t){this.currentPageIdx=t,this.refreshPage({pageNo:t,pageSize:10})},addCoin:function(){this.createOrUpdate=!0,this.showEditModal=!0},cancelEdit:function(){for(var t in this.coinInformation)this.coinInformation[t]="";this.coinInformation.id=null,this.switchStatus=this.coinInformation.status=!0},saveEditPass:function(){var t=this;this.switchStatus?this.coinInformation.status=0:this.coinInformation.status=1;var e="";e=this.createOrUpdate?o.addOtcCoin:o.updateOtcCoin,e(this.coinInformation).then(function(e){e.code?t.$Message.error(e.message):(t.refreshPage(),t.$Message.success(e.message)),t.cancelEdit()}).catch(function(t){})},refreshPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.ifloading=!0,(0,o.queryOtcCoin)(e).then(function(e){e.code?t.$Message.error(e.message):t.cbData=e.data,t.ifloading=!1}).catch(function(t){})}},created:function(){this.refreshPage()}}},709:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n\t\t\t币种管理\n\t\t\t"),n("Button",{attrs:{type:"primary",size:"small"},on:{click:t.refreshPageManual}},[n("Icon",{attrs:{type:"refresh"}}),t._v(" 刷新\n\t\t\t")],1)],1),t._v(" "),n("Row",{staticClass:"functionWrapper"},[n("div",{staticClass:"btnsWrapper clearfix"},[n("Button",{attrs:{type:"error"},on:{click:t.delCoin}},[t._v("删除")]),t._v(" "),n("Button",{attrs:{type:"info"},on:{click:t.addCoin}},[t._v("添加")])],1)]),t._v(" "),n("Row",[n("Table",{attrs:{loading:t.ifloading,columns:t.columnsList,data:t.cbData.content,border:""},on:{"on-selection-change":t.selectionChange}})],1),t._v(" "),n("Row",{staticClass:"pageWrapper"},[n("Page",{attrs:{total:t.cbData.totalElements,current:t.currentPageIdx,"show-elevator":""},on:{"on-change":t.changePage}})],1),t._v(" "),n("Modal",{attrs:{"mask-closable":!1,width:450,title:"编辑币种"},on:{"on-ok":t.saveEditPass,"on-cancel":t.cancelEdit},model:{value:t.showEditModal,callback:function(e){t.showEditModal=e},expression:"showEditModal"}},[n("Form",{attrs:{model:t.coinInformation,rules:t.ruleValidate,"label-width":100,"label-position":"right"}},[n("FormItem",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"币种编号：",prop:"id"}},[n("Input",{model:{value:t.coinInformation.id,callback:function(e){t.$set(t.coinInformation,"id",e)},expression:"coinInformation.id"}})],1),t._v(" "),n("FormItem",{attrs:{label:"币种名称：",prop:"nameCn"}},[n("Input",{model:{value:t.coinInformation.nameCn,callback:function(e){t.$set(t.coinInformation,"nameCn",e)},expression:"coinInformation.nameCn"}})],1),t._v(" "),n("FormItem",{attrs:{label:"英文名称：",prop:"name"}},[n("Input",{model:{value:t.coinInformation.name,callback:function(e){t.$set(t.coinInformation,"name",e)},expression:"coinInformation.name"}})],1),t._v(" "),n("FormItem",{attrs:{label:"货币单位：",prop:"unit"}},[n("Input",{model:{value:t.coinInformation.unit,callback:function(e){t.$set(t.coinInformation,"unit",e)},expression:"coinInformation.unit"}})],1),t._v(" "),n("FormItem",{attrs:{label:"交易手续费率（%）：",prop:"jyRate"}},[n("Input",{model:{value:t.coinInformation.jyRate,callback:function(e){t.$set(t.coinInformation,"jyRate",e)},expression:"coinInformation.jyRate"}})],1),t._v(" "),n("FormItem",{attrs:{label:"卖出广告最低发布数量：",prop:"sellMinAmount"}},[n("Input",{model:{value:t.coinInformation.sellMinAmount,callback:function(e){t.$set(t.coinInformation,"sellMinAmount",e)},expression:"coinInformation.sellMinAmount"}})],1),t._v(" "),n("FormItem",{attrs:{label:"买入广告最低发布数量：",prop:"buyMinAmount"}},[n("Input",{model:{value:t.coinInformation.buyMinAmount,callback:function(e){t.$set(t.coinInformation,"buyMinAmount",e)},expression:"coinInformation.buyMinAmount"}})],1),t._v(" "),n("FormItem",{attrs:{label:"状态：",prop:"status"}},[n("i-switch",{attrs:{size:"large"},model:{value:t.switchStatus,callback:function(e){t.switchStatus=e},expression:"switchStatus"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("正常")]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("失效")])])],1)],1)],1)],1)],1)},a=[];o._withStripped=!0;var i={render:o,staticRenderFns:a};e.default=i}});